


<div class="body">

  <div class="section" id="reading-configurations">
<h1>Reading Configurations<a class="headerlink" href="#reading-configurations" title="Ссылка на этот заголовок">¶</a></h1>
<p><tt class="xref doc docutils literal"><span class="pre">Phalcon\Config</span></tt> is a component used to read configuration files of various formats (using adapters) into
PHP objects for use in an application.</p>
<div class="section" id="file-adapters">
<h2>File Adapters<a class="headerlink" href="#file-adapters" title="Ссылка на этот заголовок">¶</a></h2>
<p>The adapters available are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">File Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ini</td>
<td>Uses INI files to store settings. Internally the adapter uses the PHP function parse_ini_file.</td>
</tr>
<tr class="row-odd"><td>Array</td>
<td>Uses PHP multidimensional arrays to store settings. This adapter offers the best performance.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="native-arrays">
<h2>Native Arrays<a class="headerlink" href="#native-arrays" title="Ссылка на этот заголовок">¶</a></h2>
<p>The next example shows how to convert native arrays into Phalcon\Config objects. This option offers the best performance since no files are
read during this request.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$settings</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s2">&quot;database&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s2">&quot;adapter&quot;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;Mysql&quot;</span><span class="p">,</span>
        <span class="s2">&quot;host&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
        <span class="s2">&quot;username&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;scott&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;cheetah&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dbname&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;test_db&quot;</span><span class="p">,</span>
    <span class="p">),</span>
     <span class="s2">&quot;app&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s2">&quot;controllersDir&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;../app/controllers/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;modelsDir&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;../app/models/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;viewsDir&quot;</span>       <span class="o">=&gt;</span> <span class="s2">&quot;../app/views/&quot;</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="s2">&quot;mysetting&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;the-value&quot;</span>
<span class="p">);</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Config</span><span class="p">(</span><span class="nv">$settings</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">app</span><span class="o">-&gt;</span><span class="na">controllersDir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">database</span><span class="o">-&gt;</span><span class="na">username</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">mysetting</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>If you want to better organize your project you can save the array in another file and then read it.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s2">&quot;config/config.php&quot;</span><span class="p">;</span>
<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Config</span><span class="p">(</span><span class="nv">$settings</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-ini-files">
<h2>Reading INI Files<a class="headerlink" href="#reading-ini-files" title="Ссылка на этот заголовок">¶</a></h2>
<p>Ini files are a common way to store settings. Phalcon\Config uses the optimized PHP function parse_ini_file to read these files. Files sections are parsed into sub-settings for easy access.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[database]</span>
<span class="na">adapter</span>  <span class="o">=</span> <span class="s">Mysql</span>
<span class="na">host</span>     <span class="o">=</span> <span class="s">localhost</span>
<span class="na">username</span> <span class="o">=</span> <span class="s">scott</span>
<span class="na">password</span> <span class="o">=</span> <span class="s">cheetah</span>
<span class="na">dbname</span>     <span class="o">=</span> <span class="s">test_db</span>

<span class="k">[phalcon]</span>
<span class="na">controllersDir</span> <span class="o">=</span> <span class="s">&quot;../app/controllers/&quot;</span>
<span class="na">modelsDir</span>      <span class="o">=</span> <span class="s">&quot;../app/models/&quot;</span>
<span class="na">viewsDir</span>       <span class="o">=</span> <span class="s">&quot;../app/views/&quot;</span>

<span class="k">[models]</span>
<span class="na">metadata.adapter</span>  <span class="o">=</span> <span class="s">&quot;Memory&quot;</span>
</pre></div>
</div>
<p>You can read the file as follows:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Config\Adapter\Ini</span><span class="p">(</span><span class="s2">&quot;path/config.ini&quot;</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">phalcon</span><span class="o">-&gt;</span><span class="na">controllersDir</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">database</span><span class="o">-&gt;</span><span class="na">username</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">models</span><span class="o">-&gt;</span><span class="na">metadata</span><span class="o">-&gt;</span><span class="na">adapter</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="merging-configurations">
<h2>Merging Configurations<a class="headerlink" href="#merging-configurations" title="Ссылка на этот заголовок">¶</a></h2>
<p>Phalcon\Config allows to merge a configuration object into another one recursively:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Config</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;database&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;host&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="s1">&#39;dbname&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;test_db&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;debug&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="p">));</span>

<span class="nv">$config2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Config</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;database&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;scott&#39;</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;secret&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">));</span>

<span class="nv">$config</span><span class="o">-&gt;</span><span class="na">merge</span><span class="p">(</span><span class="nv">$config2</span><span class="p">);</span>

<span class="nb">print_r</span><span class="p">(</span><span class="nv">$config</span><span class="p">);</span>
</pre></div>
</div>
<p>The above code produces the following:</p>
<div class="highlight-html"><div class="highlight"><pre>Phalcon\Config Object
(
    [database] =&gt; Phalcon\Config Object
        (
            [host] =&gt; localhost
            [dbname] =&gt; test_db
            [username] =&gt; scott
            [password] =&gt; secret
        )
    [debug] =&gt; 1
)
</pre></div>
</div>
<p>There are more adapters available for this components in the <a class="reference external" href="https://github.com/phalcon/incubator">Phalcon Incubator</a></p>
</div>
</div>


</div>