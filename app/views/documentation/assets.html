


<ul>
<li><a class="reference internal" href="#">Assets Management</a><ul>
<li><a class="reference internal" href="#adding-resources">Adding Resources</a></li>
<li><a class="reference internal" href="#local-remote-resources">Local/Remote resources</a></li>
<li><a class="reference internal" href="#collections">Collections</a></li>
<li><a class="reference internal" href="#prefixes">Prefixes</a></li>
<li><a class="reference internal" href="#custom-output">Custom Output</a></li>
</ul>
</li>
</ul>


  <div class="section" id="assets-management">
<h1>Assets Management<a class="headerlink" href="#assets-management" title="Ссылка на этот заголовок">¶</a></h1>
<p>Phalcon\Assets is a component that allows the developer to manage static resources
such as css stylesheets or javascript libraries in a web application.</p>
<p><tt class="xref doc docutils literal"><span class="pre">Phalcon\Assets\Manager</span></tt> is available in the services
container, so you can add resources from any part of the application where the container
is available.</p>
<div class="section" id="adding-resources">
<h2>Adding Resources<a class="headerlink" href="#adding-resources" title="Ссылка на этот заголовок">¶</a></h2>
<p>Assets supports two built-in resources: css and javascripts. You can create other
resources if you need. The assets manager internally stores two default collections
of resources one for javascript and another for css.</p>
<p>You can easily add resources to these collections like follows:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">IndexController</span> <span class="k">extends</span> <span class="nx">Phalcon\Mvc\Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="c1">//Add some local CSS resources</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span>
            <span class="o">-&gt;</span><span class="na">addCss</span><span class="p">(</span><span class="s1">&#39;css/style.css&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">addCss</span><span class="p">(</span><span class="s1">&#39;css/index.css&#39;</span><span class="p">);</span>

        <span class="c1">//and some local javascript resources</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span>
            <span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/jquery.js&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/bootstrap.min.js&#39;</span><span class="p">);</span>

    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then in the views added resources can be printed:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Some amazing website<span class="nt">&lt;/title&gt;</span>
        <span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span><span class="o">-&gt;</span><span class="na">outputCss</span><span class="p">()</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>

        <span class="c">&lt;!-- ... --&gt;</span>

        <span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span><span class="o">-&gt;</span><span class="na">outputJs</span><span class="p">()</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="local-remote-resources">
<h2>Local/Remote resources<a class="headerlink" href="#local-remote-resources" title="Ссылка на этот заголовок">¶</a></h2>
<p>Local resources are those who&#8217;re provided by the same application and they&#8217;re located in the document root
of the application. URLs in local resources are generated by the &#8216;url&#8217; service, usually
<tt class="xref doc docutils literal"><span class="pre">Phalcon\Mvc\Url</span></tt>.</p>
<p>Remote resources are those such as common library like jquery, bootstrap, etc. that are provided by a CDN.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Add some local CSS resources</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span>
    <span class="o">-&gt;</span><span class="na">addCss</span><span class="p">(</span><span class="s1">&#39;//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addCss</span><span class="p">(</span><span class="s1">&#39;css/style.css&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="collections">
<h2>Collections<a class="headerlink" href="#collections" title="Ссылка на этот заголовок">¶</a></h2>
<p>Collections groups resources of the same type, the assets manager implicitly creates two collections: css and js.
You can create additional collections to group specific resources for ease of placing those resources in the views:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Javascripts in the header</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span>
    <span class="o">-&gt;</span><span class="na">collection</span><span class="p">(</span><span class="s1">&#39;header&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/jquery.js&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/bootstrap.min.js&#39;</span><span class="p">);</span>

<span class="c1">//Javascripts in the footer</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span>
    <span class="o">-&gt;</span><span class="na">collection</span><span class="p">(</span><span class="s1">&#39;footer&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/jquery.js&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/bootstrap.min.js&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Then in the views:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Some amazing website<span class="nt">&lt;/title&gt;</span>
        <span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span><span class="o">-&gt;</span><span class="na">outputJs</span><span class="p">(</span><span class="s1">&#39;header&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>

        <span class="c">&lt;!-- ... --&gt;</span>

        <span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span><span class="o">-&gt;</span><span class="na">outputJs</span><span class="p">(</span><span class="s1">&#39;footer&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;html&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="prefixes">
<h2>Prefixes<a class="headerlink" href="#prefixes" title="Ссылка на этот заголовок">¶</a></h2>
<p>Collections can be URL-prefixed, this allows to easily change from a server to other at any moment:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$scripts</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span><span class="o">-&gt;</span><span class="na">collection</span><span class="p">(</span><span class="s1">&#39;footer&#39;</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$config</span><span class="o">-&gt;</span><span class="na">enviroment</span> <span class="o">==</span> <span class="s1">&#39;development&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$scripts</span><span class="o">-&gt;</span><span class="na">setPrefix</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nv">$scripts</span><span class="o">-&gt;</span><span class="na">setPrefix</span><span class="p">(</span><span class="s1">&#39;http:://cdn.example.com/&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$scripts</span><span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/jquery.js&#39;</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/bootstrap.min.js&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>A chaineable syntax is available too:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$scripts</span> <span class="o">=</span> <span class="nv">$assets</span>
    <span class="o">-&gt;</span><span class="na">collection</span><span class="p">(</span><span class="s1">&#39;header&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setPrefix</span><span class="p">(</span><span class="s1">&#39;http://cdn.example.com/&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setLocal</span><span class="p">(</span><span class="k">false</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/jquery.js&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">addJs</span><span class="p">(</span><span class="s1">&#39;js/bootstrap.min.js&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-output">
<h2>Custom Output<a class="headerlink" href="#custom-output" title="Ссылка на этот заголовок">¶</a></h2>
<p>Methods outputJs and outputCss are available to generate the necessary HTML code according to each type of resources.
You can override this method or print the resources manually in the following way:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assets</span><span class="o">-&gt;</span><span class="na">collection</span><span class="p">(</span><span class="s1">&#39;js&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$resource</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nx">\Phalcon\Tag</span><span class="o">::</span><span class="na">javascriptInclude</span><span class="p">(</span><span class="nv">$resource</span><span class="o">-&gt;</span><span class="na">getPath</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


